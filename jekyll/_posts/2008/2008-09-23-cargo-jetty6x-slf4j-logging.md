---
title: Cargo Jetty6x Slf4j Logging

tags: [blogger]
---
I've been getting the following error when i trying to start my cargo/jetty6x plugin via maven.<br /><br /><pre name="code" class="java"><br />org.apache.commons.logging.LogConfigurationException: org.apache.commons.logging.LogConfigurationExc<br />eption: org.apache.commons.logging.LogConfigurationException: Invalid class loader hierarchy.  You h<br />ave more than one version of 'org.apache.commons.logging.Log' visible, which is not allowed. (Caused<br /> by org.apache.commons.logging.LogConfigurationException: Invalid class loader hierarchy.  You have<br />more than one version of 'org.apache.commons.logging.Log' visible, which is not allowed.) (Caused by<br /> org.apache.commons.logging.LogConfigurationException: org.apache.commons.logging.LogConfigurationEx<br />ception: Invalid class loader hierarchy.  You have more than one version of 'org.apache.commons.logg<br />ing.Log' visible, which is not allowed. (Caused by org.apache.commons.logging.LogConfigurationExcept<br />ion: Invalid class loader hierarchy.  You have more than one version of 'org.apache.commons.logging.<br />Log' visible, which is not allowed.))<br />        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:543)<br />        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)<br />        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:209)<br />        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)<br />        at org.apache.jasper.servlet.JspServlet.<init>(JspServlet.java:58)<br />        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br />        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)<br />        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)<br />        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)<br />        at java.lang.Class.newInstance0(Class.java:350)<br />        at java.lang.Class.newInstance(Class.java:303)<br />        at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:152)<br />        at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)<br />        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)<br />        at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:593)<br />        at org.mortbay.jetty.servlet.Context.startContext(Context.java:139)<br />        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1191)<br />        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:481)<br />        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:434)<br />        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:40)<br />        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br />        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br />        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br />        at java.lang.reflect.Method.invoke(Method.java:585)<br /></pre><br /> <br /><pre name="code" class="java"><br /><dependency><br />    <groupId>org.slf4j</groupId><br />    <artifactId>jcl-over-slf4j</artifactId><br />    <version>1.5.3</version><br /></dependency><br /><dependency><br />    <groupId>org.slf4j</groupId><br />    <artifactId>slf4j-api</artifactId><br />    <version>1.5.3</version><br /></dependency><br /><dependency><br />    <groupId>org.slf4j</groupId><br />    <artifactId>slf4j-simple</artifactId><br />    <version>1.5.3</version><br /></dependency><br /></pre><br /><br />I have found this post <a href="http://btmatthews.com/blog/?p=5#more-5">Switching to SLF4J</a> and <a href="http://www.brokenbuild.com/blog/2007/02/21/maven2-cargo-and-deploying-to-jetty-6-with-commons-logging/">this</a>. I believe i have configured my <a href="http://www.slf4j.org/">slf4j</a> jars correctly like so <br /><br /><pre name="code" class="xml"><br /><plugin><br /><groupId>org.codehaus.cargo</groupId><br /><artifactId>cargo-maven2-plugin</artifactId><br /><configuration><br />    <wait>false</wait><br />    <container><br />       <containerId>jetty6x</containerId><br />       <type>embedded</type><br />    </container><br />    <configuration><br /> <properties><br />     <cargo.servlet.port>${servlet.port}</cargo.servlet.port><br /> </properties><br />    </configuration>                   <br /></configuration><br /><executions><br />    <execution><br /> <id>start-container</id><br /> <phase>pre-integration-test</phase><br /> <goals><br />     <goal>start</goal><br />     <goal>deploy</goal><br /> </goals><br />    </execution><br />    <execution><br /> <id>stop-container</id><br /> <phase>post-integration-test</phase><br /> <goals><br />     <goal>stop</goal><br /> </goals><br />    </execution><br /></executions><br /></plugin><br /></pre><br /><br />The standalone jetty plugin seems to run ok.<br /><br /><pre name="code" class="xml"><br /><plugin><br /> <groupId>org.mortbay.jetty</groupId><br /> <artifactId>maven-jetty-plugin</artifactId><br /> <version>6.1.6</version><br /> <configuration><br />     <connectors><br />  <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector"><br />      <port>${servlet.port}</port><br />      <maxIdleTime>30000</maxIdleTime><br />  </connector><br />     </connectors><br />     <contextPath>/</contextPath><br />     <stopKey>stop</stopKey><br />     <stopPort>9091</stopPort><br /> </configuration><br /></plugin><br /></pre>
