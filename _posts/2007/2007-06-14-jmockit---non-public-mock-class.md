---
title: JMockit : Non-public mock class
layout: post
category: blogger
# Pulled from Blogger. Last updated there on: Thu Jun 14 13:31:00 IST 2007
---
Running a simple unit test, with the 'new Object()' syntax.<br /><br /><code class="prettyprint"><br />public void test()<br />{<br />  Mockit.redefineMethods(emeraldjava.impl.ApplicationCase.class, new Object() {<br />      public void method()<br />      {<br />        System.out.println("JMocked");<br />      }<br />    });<br />  }<br />  ApplicationCaseTest appCase = new ApplicationCaseTest(getName());<br />  assert(appCase.method(),..);<br />}<br /></code><br /><br />I got this error.<br /><br /><code class="prettyprint"><br />java.lang.IllegalArgumentException: Non-public mock class<br /> at mockit.Mockit.collectMockMethods(Mockit.java:182)<br /> at mockit.Mockit.redefineMethods(Mockit.java:170)<br /> at mockit.Mockit.redefineMethods(Mockit.java:124)<br /> at emerabldjava.workflow.ClaimIntakeTest.test2(ClaimIntakeTest.java:92)<br /> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br /> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br /> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br /> at java.lang.reflect.Method.invoke(Method.java:585)<br /> at junit.framework.TestCase.runTest(TestCase.java:166)<br /> at junit.framework.TestCase.runBare(TestCase.java:140)<br /> at junit.framework.TestResult$1.protect(TestResult.java:106)<br /> at junit.framework.TestResult.runProtected(TestResult.java:124)<br /> at junit.framework.TestResult.run(TestResult.java:109)<br /> at junit.framework.TestCase.run(TestCase.java:131)<br /> at junit.framework.TestSuite.runTest(TestSuite.java:173)<br /> at junit.framework.TestSuite.run(TestSuite.java:168)<br /> at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:478)<br /> at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:344)<br /> at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)<br /></code><br /><br />Solution<br /><br />Use an named class<br /><br /><code class="prettyprint"><br />public Test extends TestCase<br />{<br /><br /> public class AppMock<br />  {<br />    public void method()<br />      {<br />        System.out.println("JMocked");<br />      }<br />  }<br /><br />  public void test()<br />    throws AppException, InformationalException, ClassNotFoundException<br />  {<br />    Mockit.redefineMethods(emeraldjava.impl.ApplicationCase.class, new AppMock());<br />    UICApplicationCaseTest appCase = new UICApplicationCaseTest(getName());<br />    assert(appCase.method(),..);<br />  }<br />}<br /></code>
