---
title: java.lang.IllegalAccessError: tried to access method junit.framework.TestCase.()V
layout: post
category: blogger
# Pulled from Blogger. Last updated there on: Wed Jul 25 16:37:00 IST 2007
---
Seems this error happens when running ANT 1.7 and JUnit 3.8.1. The quick solution is upgrade junit to 3.8.X.<br /><br />The cause as i can make out at this time is this. The junit task in the ant script forks a new jvm which creates a new classloader, this correctly picks up the junit 3.7.1 jar. Between 3.7 and 3.8.1 junit changed the default method name for getting the test name, from name() to getName(). ANT 1.7 in this case, first checks the junit version and then attempts to use reflection to call the correct test name method, but since the Task class has a protected constuctor method and there is a new classloader this IllegalAccessError is thrown. <br /><br />The method name change is correct, the reflection stuff is correct but the classloader stuff is probally smack.  <br /><br /><pre name="code" class="java"><br />C:\Develop\UIClaims50_PeriodicBuilder\UI\UITools\components\cruisecontrol\projects\build-ant.xml:94: The following error occurred while executing this line:<br />C:\Develop\UIClaims50_PeriodicBuilder\UI\EJBServer\ant\uiclaims.junit.xml:43: java.lang.IllegalAccessError: tried to access method junit.framework.TestCase.()V from class org.apache.tools.ant.taskdefs.optional.junit.JUnitTaskMirrorImpl$VmExitErrorTest<br /> at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:541)<br /> at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:418)<br /> at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)<br /> at sun.reflect.GeneratedMethodAccessor170.invoke(Unknown Source)<br /> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br /> at java.lang.reflect.Method.invoke(Method.java:585)<br />...<br /> at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)<br />Caused by: C:\Develop\UIClaims50_PeriodicBuilder\UI\EJBServer\ant\uiclaims.junit.xml:43: java.lang.IllegalAccessError: tried to access method junit.framework.TestCase.()V from class org.apache.tools.ant.taskdefs.optional.junit.JUnitTaskMirrorImpl$VmExitErrorTest<br /> at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:115)<br /> at org.apache.tools.ant.Task.perform(Task.java:348)<br /> at org.apache.tools.ant.Target.execute(Target.java:357)<br /> at org.apache.tools.ant.Target.performTasks(Target.java:385)<br /> at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1329)<br /> at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)<br /> at org.apache.tools.ant.Project.executeTargets(Project.java:1181)<br /> at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:416)<br /> ... 16 more<br />Caused by: java.lang.IllegalAccessError: tried to access method junit.framework.TestCase.()V from class org.apache.tools.ant.taskdefs.optional.junit.JUnitTaskMirrorImpl$VmExitErrorTest<br /> at org.apache.tools.ant.taskdefs.optional.junit.JUnitTaskMirrorImpl$VmExitErrorTest.(JUnitTaskMirrorImpl.java:80)<br /> at org.apache.tools.ant.taskdefs.optional.junit.JUnitTaskMirrorImpl.addVmExit(JUnitTaskMirrorImpl.java:55)<br /> at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.logVmExit(JUnitTask.java:1446)<br /></pre>
